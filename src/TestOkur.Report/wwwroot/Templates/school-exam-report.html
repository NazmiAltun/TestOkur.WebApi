<!DOCTYPE html>
<html>

<head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <title>OKUL KARNESİ</title>
    <link rel="stylesheet" href="https://report.testokur.com/assets/main.css">
    <style type='text/css'>
		html {
            font-size: {{fontSizePercent}}%;
        }
       
        h2{
            margin-top: 1.25rem;
        }
    </style>
    <script src="https://report.testokur.com/assets/Chart.min.js"></script>
</head>

<body>
        {{#if html}}
        <button class="print-button" onclick="window.print();">Yazdir</button>
        {{/if}}
    {{#each list}}
    <h2>OKUL KARNESİ</h2>
    <div class='grid-container'>
        <div class='grid-item'>
            <strong>Okul Adı</strong>
        </div>
        <div class='grid-item'>{{schoolName}}</div>
        <div class='grid-item'>
            <strong>Sınav Adı</strong>
        </div>
        <div class='grid-item'>{{examName}}</div>
    </div>
    <div class='grid-container'>
        <div class='grid-item'>
            <strong>İl / İlçe</strong>
        </div>
        <div class='grid-item'>{{cityName}} / {{districtName}}</div>
        <div class='grid-item'>
            <strong>Sınav Tarihi</strong>
        </div>
        <div class='grid-item'>{{examDate}}</div>
    </div>
    <br />
    <div class='container'>
        <div class='item'>
            <table>
                <thead>
                    <tr>
                        <th rowspan='2'>DERSLER</th>
                        <th colspan='6'>Okul Ortalamaları</th>
                        <th colspan='3'>Sınav Ortalamaları</th>
                        <th colspan='3'>Sıralama</th>
                    </tr>
                    <tr>
                        <th>Soru</th>
                        <th>Doğru</th>
                        <th>Yanlış</th>
                        <th>Boş</th>
                        <th>NET</th>
                        <th>Başarı</th>
                        <th>İlçe</th>
                        <th>İl</th>
                        <th>Genel</th>
                        <th>İlçe</th>
                        <th>İl</th>
                        <th>Genel</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each sections}}
                    <tr>
                        <td>{{lessonName}}</td>
                        <td>{{questionCount}}</td>
                        <td>{{formatTwoDecimalPlaces correctCount}}</td>
                        <td>{{formatTwoDecimalPlaces wrongCount}}</td>
                        <td>{{formatTwoDecimalPlaces emptyCount}}</td>
                        <td>{{formatTwoDecimalPlaces net}}</td>
                        <td>{{formatOneDecimalPlace successPercent}} %</td>
                        <td>{{formatTwoDecimalPlaces districtAverageNet}}</td>
                        <td>{{formatTwoDecimalPlaces cityAverageNet}}</td>
                        <td>{{formatTwoDecimalPlaces generalAverageNet}}</td>
                        <td>{{districtOrder}}</td>
                        <td>{{cityOrder}}</td>
                        <td>{{generalOrder}}</td>
                    </tr>
                    {{/each}}
                </tbody>
                <tfoot>
                    <tr>
                        <th>TOPLAM/ORT.</th>
                        <th>{{totalQuestionCount}}</th>
                        <th>{{formatTwoDecimalPlaces totalCorrectCount}}</th>
                        <th>{{formatTwoDecimalPlaces totalWrongCount}}</th>
                        <th>{{formatTwoDecimalPlaces totalEmptyCount}}</th>
                        <th>{{formatTwoDecimalPlaces totalNet}}</th>
                        <th>{{formatOneDecimalPlace successPercentAverage}}%</th>
                        <th>{{formatTwoDecimalPlaces districtAverageNetAverage}}</th>
                        <th>{{formatTwoDecimalPlaces cityAverageNetAverage}}</th>
                        <th>{{formatTwoDecimalPlaces generalAverageNetAverage}}</th>
                        <th>{{districtOrderAverage}}</th>
                        <th>{{cityOrderAverage}}</th>
                        <th>{{generalOrderAverage}}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class='item ml10px'>
            <table class='single-col'>
                <thead>
                    <tr>
                        <th>
                            <strong>PUAN ORTALAMASI</strong>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{formatTwoDecimalPlaces scoreAverage}}</td>
                    </tr>
                </tbody>
            </table>
            <br />
            <br />
            <table class='single-col'>
                <thead>
                    <tr>
                        <th>
                            <strong>BAŞARI (%)</strong>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{formatOneDecimalPlace successPercent}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <br />
    <div class='container'>
        <div class='item'>
            <table>
                <thead>
                    <tr>
                        <th colspan='4'>Puan Ortalamaları, Katılım ve Sıralama Bilgileri</th>
                    </tr>
                    <tr>
                        <th>Bilgi</th>
                        <th>İlçe</th>
                        <th>İl</th>
                        <th>Genel</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Okul Katılımı</td>
                        <td>{{totalAttendedSchoolInDistrict}}</td>
                        <td>{{totalAttendedSchoolInCity}}</td>
                        <td>{{totalAttendedSchoolInGeneral}}</td>
                    </tr>
                    <tr>
                        <td>Öğrenci Katılımı</td>
                        <td>{{totalAttendedStudentInDistrict}}</td>
                        <td>{{totalAttendedStudentInCity}}</td>
                        <td>{{totalAttendedStudentInGeneral}}</td>
                    </tr>
                    <tr>
                        <td>Puan Ortalaması</td>
                        <td>{{formatOneDecimalPlace averageScoreInDistrict}}</td>
                        <td>{{formatOneDecimalPlace averageScoreInCity}}</td>
                        <td>{{formatOneDecimalPlace averageScoreInGeneral}}</td>
                    </tr>
                    <tr class='emphasized'>
                        <td>Dereceniz</td>
                        <td>{{districtOrder}}</td>
                        <td>{{cityOrder}}</td>
                        <td>{{generalOrder}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class='item'>
            <canvas id='canvas-score-{{@index}}'></canvas>
            <script>
                new Chart(document.getElementById('canvas-score-{{@index}}'), {
    				type: 'bar',
    				data: {
    				   	labels: ['Puanınız','İlçe Ort.','İl Ort.','Genel Ort.',''],
    				   	datasets: [{
    				   	    backgroundColor:['#3d78f0','#f03d3d','#21a60c','#6200b3','white'],
    				   	    data: [
    				   	        {{scoreAverage}},
    				   	        {{averageScoreInDistrict}},
    				   	        {{averageScoreInCity}},
    				   	        {{averageScoreInGeneral}},
    				   	        0]
    				   	}]
    				},
    				options: {
    					legend: {
    						display:false,
    					},
    					title: {
    						display: true,
    						text: 'Okul Puanının Ortalamalar ile Karşılaştırması'
    					}
				}});
			</script>
        </div>
    </div>
    <h3>DERSLERİN NET ORTALAMALARINA GÖRE KARŞILAŞTIRILMASI</h3>
    <div class='container lesson-container'>
        {{#each sections}}
        <div class='lesson-item'>
            <canvas id='canvas-{{lessonName}}-{{@../index}}'></canvas>
            <script>
                new Chart(document.getElementById('canvas-{{lessonName}}-{{@../index}}'), {
    				type: 'bar',
    				data: {
    				   	labels: ['Puanınız','İlçe Ort.','İl Ort.','Genel Ort.',''],
    				   	datasets: [{
    				   	    backgroundColor:['#3d78f0','#f03d3d','#21a60c','#6200b3','white'],
    				   	    data: [
    				   	        {{net}},
    				   	        {{districtAverageNet}},
    				   	        {{cityAverageNet}},
    				   	        {{generalAverageNet}},
    				   	        0]
    				   	}]
    				},
    				options: {
    				    maintainAspectRatio: false,
    					legend: {
    						display:false,
    					},
    					title: {
    						display: true,
    						text: '{{lessonName}}'
    					}
				}});
			</script>
        </div>
        {{/each}}
    </div>
    <div style='page-break-before: always;'></div>
    {{/each}}
</body>

</html>